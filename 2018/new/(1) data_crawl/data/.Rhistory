}
}
n = 5
for(i in seq(0,(n-1))){
for(j in seq(i,i+4)){
a<-seq(1,5)
print([a[(j%%n)+1]])
}
}
n = 5
for(i in seq(0,(n-1))){
for(j in seq(i,i+4)){
a<-seq(1,5)
print(list(a[(j%%n)+1]))
}
}
for(i in seq(0,(n-1))){
for(j in seq(i,i+4)){
a<-seq(1,5)
print(a[(j%%n)+1])
}
}
n = 5
vecs=matrix(nrow=5,ncol=5)
for(i in seq(0,(n-1))){
for(j in seq(i,i+4)){
a<-seq(1,5)
print(a[(j%%n)+1])
print(',')
}
}
n = 5
vecs=matrix(nrow=5,ncol=5)
for(i in seq(0,(n-1))){
for(j in seq(i,i+4)){
a<-seq(1,5)
print(a[(j%%n)+1])
}
print(',')
}
n = 5
vecs=matrix(nrow=5,ncol=5)
for(i in seq(0,(n-1))){
empty_vec <- c()
for(j in seq(i,i+4)){
a <- seq(1,5)
val <-a[(j%%n)+1]
empty_vec <- append(empty_vec,val)
}
print(empty_vec)
print(',')
}
n = 5
vecs=matrix(nrow=5,ncol=5)
for(i in seq(0,(n-1))){
empty_vec <- c()
for(j in seq(i,i+4)){
a <- seq(1,5)
val <-a[(j%%n)+1]
empty_vec <- append(empty_vec,val)
}
vecs[n+1,] <- empty_vec
}
vecs
vecs[1,]
vecs[1,] <- c(1,2,3,4,5)
vecs
print(empty_vec)
n = 5
vecs=matrix(nrow=5,ncol=5)
for(i in seq(0,(n-1))){
empty_vec <- c()
for(j in seq(i,i+4)){
a <- seq(1,5)
val <-a[(j%%n)+1]
empty_vec <- append(empty_vec,val)
}
print(empty_vec)
}
vec[1,]
vecs[1,]
vecs
n = 5
vecs=matrix(nrow=5,ncol=5)
for(i in seq(0,(n-1))){
empty_vec <- c()
for(j in seq(i,i+4)){
a <- seq(1,5)
val <-a[(j%%n)+1]
empty_vec <- append(empty_vec,val)
}
print(class(empty_vec))
}
n = 5
vecs=matrix(nrow=5,ncol=5)
for(i in seq(0,(n-1))){
empty_vec <- c()
for(j in seq(i,i+4)){
a <- seq(1,5)
val <-a[(j%%n)+1]
empty_vec <- append(empty_vec,val)
}
print(type(empty_vec))
}
n = 5
vecs=matrix(nrow=5,ncol=5)
for(i in seq(0,(n-1))){
empty_vec <- c()
for(j in seq(i,i+4)){
a <- seq(1,5)
val <-a[(j%%n)+1]
empty_vec <- append(empty_vec,val)
}
print(class(empty_vec))
}
empty_vec
type(empty_vec)
class(empty_vec)
empty_vec+1
n = 5
vecs=matrix(nrow=5,ncol=5)
for(i in seq(0,(n-1))){
empty_vec <- c()
for(j in seq(i,i+4)){
a <- seq(1,5)
val <-a[(j%%n)+1]
empty_vec <- append(empty_vec,val)
}
print(empty_vec)
}
n <- 5
vecs <- c()
for(i in seq(0,(n-1))){
empty_vec <- c()
for(j in seq(i,i+4)){
a <- seq(1,5)
val <-a[(j%%n)+1]
empty_vec <- append(empty_vec,val)
}
vecs <- append(vecs,empty_vec)
}
vecs
matrix(vecs,nrow=5,ncol=5)
equ_x <- matrix(vecs,nrow=5,ncol=5)
equ_y <- c(-5,2,5,10,11)
equ_x
solve(equ_x,equ_y)
solve(equ_x,equ_y)
res <- solve(equ_x,equ_y)
res
res * c(1,2,3,4,5)
sum(res * c(1,2,3,4,5))
sum(res * c(2,3,4,5,1))
equ_x * res
sum(equ_x * res)
rowsum(equ_x * res)
equ_x %*% res
equ_x
equ_y
equ_x %*% res
install.packages('pracma')
lat3 = matrix(
c(45.42817,45.39046,45.42714,45.38942)
nrow = 2,ncol = 2
)
lat3
lat3 = matrix(
c(45.42817,45.39046,45.42714,45.38942),
nrow = 2,ncol = 2)
lat3
lat3 = matrix(
c(45.42817,45.39046,45.42714,45.38942),
nrow = 2,ncol = 2, byrow = TRUE)
lat3
lon3 = matrix(
c(143.4623,143.4510,143.4129,143.4017),
nrow = 2,ncol = 2, byrow = TRUE
)
lon3
as.vector(lat3)
as.vector(lat3)
as.vector(lon3)
library(pracma)
lat3 = matrix(
c(45.42817,45.39046,45.42714,45.38942),
nrow = 2,ncol = 2, byrow = TRUE)
lat3
lon3 = matrix(
c(143.4623,143.4510,143.4129,143.4017),
nrow = 2,ncol = 2, byrow = TRUE
)
lon3
as.vector(lat3)
as.vector(lon3)
lat3_vec = as.vector(lat3)
lon3_vec = as.vector(lon3)
polyarea(lat3_vec,lon3_vec)
-1.942e-06
options(scipen=100)
-1.942e-06
phi <- seq(0, 2*pi, len=3*2^12+1)
x <- cos(phi)
y <- sin(phi)
x
polyarea(lon3_vec,lat3_vec)
lat3_vec
lon3_vec
library(pracma)
lat3 = matrix(
c(45.42817,45.39046,45.42714,45.38942),
nrow = 2,ncol = 2, byrow = TRUE)
lon3 = matrix(
c(143.4623,143.4510,143.4129,143.4017),
nrow = 2,ncol = 2, byrow = TRUE)
lat3_vec = as.vector(lat3)
lon3_vec = as.vector(lon3)
polyarea(lon3_vec,lat3_vec)
?polyarea
pkgs <- c('dplyr','readxl','tidyr')
sapply(pkgs,require,character.only = TRUE)
a <- read_xlsx('yaesan.xlsx',sheet=1)
a
a %>% seperate('기관명',' ')
colnames(a)
separate(a,'기관명',c('a','b','c','d','e','f'),' ')
separate(a,'기관명',c('a','b','c','d','e'),' ')
separate(a,'기관명',c('nums','name','work_count','spend_21','spend_20'),' ')
a <- separate(a,'기관명',c('nums','name','work_count','spend_21','spend_20'),' ')
a
a['spend_21']
pkgs <- c('dplyr','readxl','tidyr','stringr')
sapply(pkgs,require,character.only = TRUE)
a['spend_21'] %>% str_replace_all(',','')
a['spend_21'] %>% str_replace_all('\,','')
a['spend_21'] %>% str_replace_all('\\,','')
sapply(a['spend_21'],str_replace_all(',',''))
sapply(a['spend_21'],str_remove_all(','))
sapply(a['spend_21'],str_remove_all(x,','))
sapply(a['spend_21'],function(x) str_remove_all(x,','))
sapply(a[,c('spend_21','spend_20')],function(x) str_remove_all(x,','))
a[,c('spend_21','spend_20')] <- sapply(a[,c('spend_21','spend_20')],
function(x) str_remove_all(x,','))
a
a[,'spend_20'] <- sapply(a[,'spend_20'],function(x) str_replace_all(x,'-','0'))
a
a <- read_xlsx('yaesan.xlsx',sheet=1)
a <- separate(a,'기관명',c('nums','name','work_count','spend_21','spend_20'),' ')
a[,'spend_20'] <- sapply(a[,'spend_20'],function(x) str_replace_all(x,'-','0'))
a[,c('spend_21','spend_20')] <- sapply(a[,c('spend_21','spend_20')],
function(x) str_remove_all(x,',') * 100)
numeric(100.3)
astype
as.integer(3.23)
as.numeric(3.23)
a <- read_xlsx('yaesan.xlsx',sheet=1)
a <- separate(a,'기관명',c('nums','name','work_count','spend_21','spend_20'),' ')
a[,'spend_20'] <- sapply(a[,'spend_20'],function(x) str_replace_all(x,'-','0'))
a[,c('spend_21','spend_20')] <- sapply(a[,c('spend_21','spend_20')],
function(x) as.numeric(str_remove_all(x,',')) * 100)
a
a <- read_xlsx('yaesan.xlsx',sheet=1)
a <- separate(a,'기관명',c('nums','name','work_count','spend_21','spend_20'),' ')
a[,'spend_20'] <- sapply(a[,'spend_20'],function(x) str_replace_all(x,'-','0'))
a[,c('spend_21','spend_20')] <- sapply(a[,c('spend_21','spend_20')],
function(x) as.numeric(str_remove_all(x,',')) / 100)
a
a %>% mutate()
a <- read_xlsx('yaesan.xlsx',sheet=1)
a <- separate(a,'기관명',c('nums','name','work_count','spend_21','spend_20'),' ')
a[,'spend_20'] <- sapply(a[,'spend_20'],function(x) str_replace_all(x,'-','0'))
a[,c('spend_21','spend_20')] <- sapply(a[,c('spend_21','spend_20')],
function(x) as.numeric(str_remove_all(x,',')) / 100)
a['spend_diff'] <- a['spend_21'] - a['spend_20']
a['spend_avg_by_work'] <- a['spend_21'] / a['work_count']
a <- read_xlsx('yaesan.xlsx',sheet=1)
a <- separate(a,'기관명',c('nums','name','work_count','spend_21','spend_20'),' ')
a[,'spend_20'] <- sapply(a[,'spend_20'],function(x) str_replace_all(x,'-','0'))
a[,c('spend_21','spend_20')] <- sapply(a[,c('spend_21','spend_20')],
function(x) as.numeric(str_remove_all(x,',')))
a['spend_diff'] <- a['spend_21'] - a['spend_20']
a['spend_avg_by_work'] <- a['spend_21'] / a['work_count']
a <- read_xlsx('yaesan.xlsx',sheet=1)
a <- separate(a,'기관명',c('nums','name','work_count','spend_21','spend_20'),' ')
a[,'spend_20'] <- sapply(a[,'spend_20'],function(x) str_replace_all(x,'-','0'))
a[,c('spend_21','spend_20','work_count')] <- sapply(a[,c('spend_21','spend_20','work_count')],
function(x) as.numeric(str_remove_all(x,',')))
a['spend_diff'] <- a['spend_21'] - a['spend_20']
a['spend_avg_by_work'] <- a['spend_21'] / a['work_count']
a
b <- read_xlsx('yaesan.xlsx',sheet=2)
b
b
b
?read_xlsx
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names=FALSE)
b
strsplit(b[,1],' ')
b[,1]
sep_str <- b[,1]
b
unlist(b)
strsplit(unlist(b[,1]),' ')
b[1]
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names=FALSE)
b <- strsplit(unlist(b[,1]),' ')
b[1]
matrix(b,nrow=17,ncol=4)
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names=FALSE)
b <- as.vector(strsplit(unlist(b[,1]),' '))
matrix(b,nrow=17,ncol=4)
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names=FALSE)
b <- as.vector(strsplit(unlist(b[,1]),' '))
b
class(b)
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names=FALSE)
b <- unlist(strsplit(unlist(b[,1]),' '))
b
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names=FALSE)
b
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names='a')
b
a
b
str_split(b[,1])
str_split(b[,1],' ')
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names='a')
b <- str_split(b[,1],' ')
matrix(b,nrow=17,ncol=4)
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names='a')
b <- str_split(b[,1],' ')
class(b)
unlist(b)
class(unlist(b))
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names='a')
b <- unlist(str_split(b[,1],' '))
matrix(b,nrow=17,ncol=4)
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names='a')
b <- unlist(str_split(b[,1],' '))
matrix(b,nrow=17,ncol=4)
matrix(b,nrow=17,ncol=4,byrow = TRUE)
matrix(b,nrow=17,ncol=5,byrow = TRUE)
b <- data.frame(matrix(b,nrow=17,ncol=5,byrow = TRUE))
colnames(b) <- c('nums','name','work_count','spend_21','spend_20')
b
class(b)
class(b[,3])
?data.frame
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names='a')
b <- unlist(str_split(b[,1],' '))
b <- data.frame(matrix(b,nrow=17,ncol=5,byrow = TRUE),stringsAsFactors = FALSE)
colnames(b) <- c('nums','name','work_count','spend_21','spend_20')
class(b[,3])
b <- read_xlsx('yaesan.xlsx',sheet=2,col_names='a')
b <- unlist(str_split(b[,1],' '))
b <- data.frame(matrix(b,nrow=17,ncol=5,byrow = TRUE),stringsAsFactors = FALSE)
colnames(b) <- c('nums','name','work_count','spend_21','spend_20')
b[,'spend_20'] <- sapply(b[,'spend_20'],function(x) str_replace_all(x,'-','0'))
b[,c('spend_21','spend_20','work_count')] <- sapply(b[,c('spend_21','spend_20','work_count')],
function(x) as.numeric(str_remove_all(x,',')))
b['spend_diff'] <- b['spend_21'] - b['spend_20']
b['spend_avg_by_work'] <- b['spend_21'] / b['work_count']
b
a
library(ggplot2)
stat_smooth()
library(ggplot2)
library(faraway)
install.packages('faraway')
stat_smooth
rat <- ratdrink
library(faraway)
data("ratdrink")
rat <- ratdrink
p <- ggplot(data=rat)
p + geom_line(aes(weeks,wt,colour=treat,group=subject))
p <- p + geom_line(aes(weeks,wt,colour=treat,group=subject))
p <- p + facet_wrap(facets = ~treat,ncol=3,nrow=1)
p <- p + theme_bw()
library(faraway)
library(ggplot2)
data("ratdrink")
rat <- ratdrink
p <- ggplot(data=rat)
p <- p + geom_line(aes(weeks,wt,colour=treat,group=subject))
p <- p + facet_wrap(facets = ~treat,ncol=3,nrow=1)
p <- p + theme_bw()
p + opts
warnings
warnings()
p + theme(legend.position = 'none')
?theme
f <- function(x){ax^2+bx+c}
D <- b^2-4ac
if(D>0){
print("서로 다른 두 실근")
}else if(D=0){
print("중근")
}else{print("해가 없다")
}
if(D>0){
print("서로 다른 두 실근")
}else if(D=0){
print("중근")
}else{print("해가 없다")
}
if(D>0){
print("서로 다른 두 실근")
}else if(D==0){
print("중근")
}else{print("해가 없다")
}
solve_disc <- function(a,b,c){
disc <- (b^2)-(4*a*c)
if(disc>0){
print("서로 다른 두 실근")
}else if(disc==0){
print("중근")
}else{print("해가 없다")
}
}
solve_disc(a=1,b=4,c=5)
read.csv('https://raw.githubusercontent.com/vincentarelbundock/Rdatasets/master/csv/HistData/GaltonFamilies.csv')
pkgs <- c('dplyr','tidyr','stringr','rlist')
sapply(pkgs,require,character.only=TRUE)
# read df
# already crawled from webpage
# crawling code is in new\(1) df_crawl\code
setwd('C:/Users/rsh15/Desktop/seunghuni/github_refact/Olympic_medal/new/(1) data_crawl/data')
country <- read.csv('country.csv',stringsAsFactors = FALSE)[,2:4]
medal   <- read.csv('medal.csv',stringsAsFactors = FALSE)[,2:6]
vote    <- read.csv('vote.csv',stringsAsFactors = FALSE)[,2:4]
gdp     <- read.csv('world_bank/gdp.csv',stringsAsFactors = FALSE)
pop     <- read.csv('world_bank/pop.csv',stringsAsFactors = FALSE)
# name check in country, medal
table(medal$country %in% country$Country)
table(vote$country %in% country$Country)
# 서독과 동독은 1990년에 통일하면서 1992년 동계올림픽에
# 1964년 동계올림픽 이후 28년만에 처음으로 단일팀으로 참가.
# 그러나 1992년의 올림픽 개최지 선정을 위한 투표는 1986년에 이루어졌음.
# 그래서 West Germany로 되어있는것을 Germany로.
vote[vote$country=='West Germany','country'] <- 'Germany'
# join data
df <- left_join(country,medal,by=c('Country'='country','year'='year'))
df <- left_join(df,vote,by=c('Country'='country','year'='year'))
df[is.na(df['code']),'code'] <- 'NA'
df[,'host_country'] <- as.numeric(sapply(df['code'],str_detect,'[*]'))
df['on_final_vote'] <- ifelse(is.na(df[,'final_vote']),0,1)
df[,c('Total','rank','final_vote')] <- lapply(df[,c('Total','rank','final_vote')],function(x)
ifelse(is.na(x),0,x))
df <- df[,!(colnames(df) %in% 'code')]
# making index
idxx <- unique(df['year'])[[1]]
gdp_mean <- list()
pop_mean <- list()
for(k in 1:length(idxx)){
a <- paste0('X',as.character((idxx[k]-5):(idxx[k]-1)))
gdp_mean[[k]] <- rowMeans(gdp[,a])
pop_mean[[k]] <- rowMeans(pop[,a])
}
gdp_mean_df <- data.frame(list.cbind(gdp_mean))
gdp_mean_df$Country <- gdp$Country
pop_mean_df <- data.frame(list.cbind(pop_mean))
pop_mean_df$Country <- pop$Country
#
df$Country[!df$Country %in% gdp_mean_df$Country]
# read df
# already crawled from webpage
# crawling code is in new\(1) df_crawl\code
setwd('C:/Users/rsh15/Desktop/seunghuni/github_refact/Olympic_medal/2018/new/(1) data_crawl/data')
pkgs <- c('dplyr','tidyr','stringr','rlist')
sapply(pkgs,require,character.only=TRUE)
# read df
# already crawled from webpage
# crawling code is in new\(1) df_crawl\code
setwd('C:/Users/rsh15/Desktop/seunghuni/github_refact/Olympic_medal/2018/new/(1) data_crawl/data')
country <- read.csv('country.csv',stringsAsFactors = FALSE)[,2:4]
medal   <- read.csv('medal.csv',stringsAsFactors = FALSE)[,2:6]
vote    <- read.csv('vote.csv',stringsAsFactors = FALSE)[,2:4]
gdp     <- read.csv('world_bank/gdp.csv',stringsAsFactors = FALSE)
pop     <- read.csv('world_bank/pop.csv',stringsAsFactors = FALSE)
# name check in country, medal
table(medal$country %in% country$Country)
table(vote$country %in% country$Country)
# 서독과 동독은 1990년에 통일하면서 1992년 동계올림픽에
# 1964년 동계올림픽 이후 28년만에 처음으로 단일팀으로 참가.
# 그러나 1992년의 올림픽 개최지 선정을 위한 투표는 1986년에 이루어졌음.
# 그래서 West Germany로 되어있는것을 Germany로.
vote[vote$country=='West Germany','country'] <- 'Germany'
# join data
df <- left_join(country,medal,by=c('Country'='country','year'='year'))
df <- left_join(df,vote,by=c('Country'='country','year'='year'))
df[is.na(df['code']),'code'] <- 'NA'
df[,'host_country'] <- as.numeric(sapply(df['code'],str_detect,'[*]'))
df['on_final_vote'] <- ifelse(is.na(df[,'final_vote']),0,1)
df[,c('Total','rank','final_vote')] <- lapply(df[,c('Total','rank','final_vote')],function(x)
ifelse(is.na(x),0,x))
df <- df[,!(colnames(df) %in% 'code')]
# making index
idxx <- unique(df['year'])[[1]]
gdp_mean <- list()
pop_mean <- list()
for(k in 1:length(idxx)){
a <- paste0('X',as.character((idxx[k]-5):(idxx[k]-1)))
gdp_mean[[k]] <- rowMeans(gdp[,a])
pop_mean[[k]] <- rowMeans(pop[,a])
}
gdp_mean_df <- data.frame(list.cbind(gdp_mean))
gdp_mean_df$Country <- gdp$Country
pop_mean_df <- data.frame(list.cbind(pop_mean))
pop_mean_df$Country <- pop$Country
#
df$Country[!df$Country %in% gdp_mean_df$Country]
